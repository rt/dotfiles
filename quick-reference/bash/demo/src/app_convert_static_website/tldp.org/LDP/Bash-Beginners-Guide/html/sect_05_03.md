::: {.NAVHEADER}
Bash Guide for Beginners
:::

[Prev](sect_05_02.md)

Chapter 5. The GNU sed stream editor

[Next](sect_05_04.md)

------------------------------------------------------------------------

::: {.sect1}
[]{#sect_05_03}5.3. Non-interactive editing {#non-interactive-editing .sect1}
===========================================

::: {.sect2}
[]{#sect_05_03_01}5.3.1. Reading sed commands from a file {#reading-sed-commands-from-a-file .sect2}
---------------------------------------------------------

Multiple **sed** commands can be put in a file and executed using the
`-f`{.option} option. When creating such a file, make sure that:

-   No trailing white spaces exist at the end of lines.

-   No quotes are used.

-   When entering text to add or replace, all except the last line end
    in a backslash.
:::

::: {.sect2}
[]{#sect_05_03_02}5.3.2. Writing output files {#writing-output-files .sect2}
---------------------------------------------

Writing output is done using the output redirection operator **\>**.
This is an example script used to create very simple HTML files from
plain text files.

+-----------------------------------------------------------------------+
| ``` {.screen}                                                         |
| sandy ~> cat script.sed                                              |
| 1i\                                                                   |
| <html>\                                                               |
| <head><title>sed generated html</title></head>\                       |
| <body bgcolor="#ffffff">\                                             |
| <pre>                                                                 |
| $a\                                                                   |
| </pre>\                                                               |
| </body>\                                                              |
| </html>                                                               |
|                                                                       |
| sandy ~> cat txt2html.sh                                              |
| #!/bin/bash                                                           |
|                                                                       |
| # This is a simple script that you can use for converting text into H |
| TML.                                                                  |
| # First we take out all newline characters, so that the appending onl |
| y happens                                                             |
| # once, then we replace the newlines.                                 |
|                                                                       |
| echo "converting $1..."                                               |
|                                                                       |
| SCRIPT="/home/sandy/scripts/script.sed"                               |
| NAME="$1"                                                             |
| TEMPFILE="/var/tmp/sed.$PID.tmp"                                      |
| sed "s/\n/^M/" $1 | sed -f $SCRIPT | sed "s/^M/\n/" > $TEMPFILE       |
| mv $TEMPFILE $NAME                                                    |
|                                                                       |
| echo "done."                                                          |
|                                                                       |
| sandy ~>                                                              |
| ```                                                                   |
+-----------------------------------------------------------------------+

`$1`{.varname} holds the first argument to a given command, in this case
the name of the file to convert:

+-----------------------------------------------------------------------+
| ``` {.screen}                                                         |
| sandy ~> cat test                                                    |
| line1                                                                 |
| line2                                                                 |
| line3                                                                 |
| ```                                                                   |
+-----------------------------------------------------------------------+

More on positional parameters in [Chapter 7](chap_07.md).

+-----------------------------------------------------------------------+
| ``` {.screen}                                                         |
| sandy ~> txt2html.sh test                                            |
| converting test...                                                    |
| done.                                                                 |
|                                                                       |
| sandy ~> cat test                                                     |
| <html>                                                                |
| <head><title>sed generated html</title></head>                        |
| <body bgcolor="#ffffff">                                              |
| <pre>                                                                 |
| line1                                                                 |
| line2                                                                 |
| line3                                                                 |
| </pre>                                                                |
| </body>                                                               |
| </html>                                                               |
|                                                                       |
| sandy ~>                                                              |
| ```                                                                   |
+-----------------------------------------------------------------------+

This is not really how it is done; this example just demonstrates
**sed** capabilities. See [Section 6.3](sect_06_03.md) for a more
decent solution to this problem, using **awk** *BEGIN* and *END*
constructs.

::: {.note}
+-----------------------------------+-----------------------------------+
| ![Note](http://tldp.org/LDP/Bash- | **Easy sed**                      |
| Beginners-Guide/images/note.gif)  |                                   |
+-----------------------------------+-----------------------------------+
| Â                                  | Advanced editors, supporting      |
|                                   | syntax highlighting, can          |
|                                   | recognize **sed** syntax. This    |
|                                   | can be a great help if you tend   |
|                                   | to forget backslashes and such.   |
+-----------------------------------+-----------------------------------+
:::
:::
:::

::: {.NAVFOOTER}

------------------------------------------------------------------------

  ------------------------- -------------------- -------------------------
  [Prev](sect_05_02.md)    [Home](index.md)    [Next](sect_05_04.md)
  Interactive editing        [Up](chap_05.md)                    Summary
  ------------------------- -------------------- -------------------------
:::
