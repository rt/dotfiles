::: {.NAVHEADER}
Bash Guide for Beginners
:::

[Prev](sect_09_05.md)

Chapter 9. Repetitive tasks

[Next](sect_09_07.md)

------------------------------------------------------------------------

::: {.sect1}
[]{#sect_09_06}9.6. Making menus with the select built-in {#making-menus-with-the-select-built-in .sect1}
=========================================================

::: {.sect2}
[]{#sect_09_06_01}9.6.1. General {#general .sect2}
--------------------------------

::: {.sect3}
### []{#sect_09_06_01_01}9.6.1.1. Use of select {#use-of-select .sect3}

The **select** construct allows easy menu generation. The syntax is
quite similar to that of the **for** loop:

**select `WORD`{.varname} \[in `LIST`{.varname}\]; do
RESPECTIVE-COMMANDS; done**

`LIST`{.varname} is expanded, generating a list of items. The expansion
is printed to standard error; each item is preceded by a number. If **in
`LIST`{.varname}** is not present, the positional parameters are
printed, as if **in `$@`{.varname}** would have been specified.
`LIST`{.varname} is only printed once.

Upon printing all the items, the `PS3`{.varname} prompt is printed and
one line from standard input is read. If this line consists of a number
corresponding to one of the items, the value of `WORD`{.varname} is set
to the name of that item. If the line is empty, the items and the
`PS3`{.varname} prompt are displayed again. If an *EOF* (End Of File)
character is read, the loop exits. Since most users don\'t have a clue
which key combination is used for the EOF sequence, it is more
user-friendly to have a **break** command as one of the items. Any other
value of the read line will set `WORD`{.varname} to be a null string.

The read line is saved in the `REPLY`{.varname} variable.

The **RESPECTIVE-COMMANDS** are executed after each selection until the
number representing the **break** is read. This exits the loop.
:::

::: {.sect3}
### []{#sect_09_06_01_02}9.6.1.2. Examples {#examples .sect3}

This is a very simple example, but as you can see, it is not very
user-friendly:

+-----------------------------------------------------------------------+
| ``` {.screen}                                                         |
| [carol@octarine testdir] cat private.sh                              |
| #!/bin/bash                                                           |
|                                                                       |
| echo "This script can make any of the files in this directory private |
| ."                                                                    |
| echo "Enter the number of the file you want to protect:"              |
|                                                                       |
| select FILENAME in *;                                                 |
| do                                                                    |
|      echo "You picked $FILENAME ($REPLY), it is now only accessible t |
| o you."                                                               |
|      chmod go-rwx "$FILENAME"                                         |
| done                                                                  |
|                                                                       |
| [carol@octarine testdir] ./private.sh                                 |
| This script can make any of the files in this directory private.      |
| Enter the number of the file you want to protect:                     |
| 1) archive-20030129                                                   |
| 2) bash                                                               |
| 3) private.sh                                                         |
| #? 1                                                                  |
| You picked archive-20030129 (1)                                       |
| #?                                                                    |
| ```                                                                   |
+-----------------------------------------------------------------------+

Setting the `PS3`{.varname} prompt and adding a possibility to quit
makes it better:

+-----------------------------------------------------------------------+
| ``` {.screen}                                                         |
| #!/bin/bash                                                          |
|                                                                       |
| echo "This script can make any of the files in this directory private |
| ."                                                                    |
| echo "Enter the number of the file you want to protect:"              |
|                                                                       |
| PS3="Your choice: "                                                   |
| QUIT="QUIT THIS PROGRAM - I feel safe now."                           |
| touch "$QUIT"                                                         |
|                                                                       |
| select FILENAME in *;                                                 |
| do                                                                    |
|   case $FILENAME in                                                   |
|         "$QUIT")                                                      |
|           echo "Exiting."                                             |
|           break                                                       |
|           ;;                                                          |
|         *)                                                            |
|           echo "You picked $FILENAME ($REPLY)"                        |
|           chmod go-rwx "$FILENAME"                                    |
|           ;;                                                          |
|   esac                                                                |
| done                                                                  |
| rm "$QUIT"                                                            |
| ```                                                                   |
+-----------------------------------------------------------------------+
:::
:::

::: {.sect2}
[]{#sect_09_06_02}9.6.2. Submenus {#submenus .sect2}
---------------------------------

Any statement within a **select** construct can be another **select**
loop, enabling (a) submenu(s) within a menu.

By default, the `PS3`{.varname} variable is not changed when entering a
nested **select** loop. If you want a different prompt in the submenu,
be sure to set it at the appropriate time(s).
:::
:::

::: {.NAVFOOTER}

------------------------------------------------------------------------

  ------------------------- -------------------- -------------------------
  [Prev](sect_09_05.md)    [Home](index.md)    [Next](sect_09_07.md)
  Break and continue         [Up](chap_09.md)         The shift built-in
  ------------------------- -------------------- -------------------------
:::
